<?phpnamespace Nemundo\WebLog\Builder;use Nemundo\Com\Device\BrowserInformation;use Nemundo\Core\Base\AbstractBase;use Nemundo\Core\Debug\Debug;use Nemundo\Core\Http\Url\UrlInformation;use Nemundo\Core\Random\UniqueId;use Nemundo\Core\System\ServerInformation;use Nemundo\Core\Time\Stopwatch;use Nemundo\Core\Type\Text\Text;use Nemundo\User\Session\UserSession;use Nemundo\WebLog\Cookie\TrackingCookie;use Nemundo\WebLog\Data\WebLog\WebLog;class WebLogBuilder extends AbstractBase{    /**     * @var Stopwatch     */    private $stoppwatch;    public function __construct()    {        $this->stoppwatch = new Stopwatch();        //$tracking = new TrackingCookie();    }    public function createWebLog()    {        /*$tracking = new TrackingCookie();        $trackingCode = $tracking->getValue();        /*if ($trackingCode == '') {            $trackingCode = (new UniqueId())->getUniqueId();            $tracking->setValue($trackingCode);        }*/        //(new Text())->substring() for browser agent        // status code        // user logged in        // user        //$domain=$_SERVER['HTTP_HOST'];        //$_SERVER['HTTP_HOST'];        //(new Debug())->write($_SERVER);        //(new Debug())->write( (new UrlInformation())->getgetHost());        //(new Debug())->write( (new UrlInformation())->getUrl());        $data = new WebLog();        $data->domain = $_SERVER['HTTP_HOST'];  // $domain;  // (new UrlInformation())->getHost();        $data->url = (new BrowserInformation())->getUrl(); ;  // (new UrlInformation())->getUrl();        $data->urlReferer = (new BrowserInformation())->getUrlReferer();        $data->ip = (new BrowserInformation())->getIpAddress();        $data->browserAgent = (new BrowserInformation())->getBrowserAgent();        //$data->tracking = (new TrackingCookie())->getValue();  //  $trackingCode;        if ((new UserSession())->isUserLogged()) {            $data->userLogged=true;            $data->userId = (new UserSession())->userId;        } else {            $data->userLogged=false;        }        $data->loadingTime = $this->stoppwatch->stop();        $data->save();    }}
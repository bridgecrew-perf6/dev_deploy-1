<?phpnamespace Nemundo\Meteoschweiz\Content\StationDifference;use Nemundo\Content\Type\AbstractContentType;use Nemundo\Meteoschweiz\Content\StationDifference\Form\StationDifferenceContentForm;use Nemundo\Meteoschweiz\Data\MesswertStation\MesswertStationReader;use Nemundo\Meteoschweiz\Data\StationDifference\StationDifference;use Nemundo\Meteoschweiz\Data\StationDifference\StationDifferenceReader;use Nemundo\Meteoschweiz\Data\StationDifference\StationDifferenceRow;use Nemundo\Meteoschweiz\Data\StationDifference\StationDifferenceUpdate;abstract class AbstractStationDifferenceContentType extends AbstractContentType{    public $station1Id;    public $station2Id;    protected function loadContentType()    {    //    $this->typeLabel = 'Messwert Difference';      //  $this->typeId = '';        $this->formClassList[] = StationDifferenceContentForm::class;        //$this->viewClassList[]  = TemperatureDifferenceContentView::class;        //$this->viewClassList[]  = QnhDifferenceContentView::class;    }    protected function onCreate()    {        $data=new StationDifference();        $data->station1Id=$this->station1Id;        $data->station2Id=$this->station2Id;        $this->dataId=$data->save();    }    protected function onUpdate()    {        $update=new StationDifferenceUpdate();        $update->station1Id=$this->station1Id;        $update->station2Id=$this->station2Id;        $update->updateById($this->dataId);    }    protected function onDataRow()    {        $reader = new StationDifferenceReader();        $reader->model->loadStation1();        $reader->model->loadStation2();        $this->dataRow=$reader->getRowById($this->dataId);        //$this->dataRow=(new StationDifferenceReader())->getRowById($this->dataId);    }    /**     * @return \Nemundo\Model\Row\AbstractModelDataRow|StationDifferenceRow     */    public function getDataRow()    {        return parent::getDataRow();    }    public function getSubject()    {        //$station1Row = (new MesswertStationReader())->getRowById($this->station1Id);        //$station2Row = (new MesswertStationReader())->getRowById($this->station2Id);        $differenceRow = $this->getDataRow();        $altitudeDifference = $differenceRow->station2->geoCoordinate->altitude - $differenceRow->station1->geoCoordinate->altitude;        $subject = 'Temp Difference (pro 100m) ' . $differenceRow->station1->station . ' - ' . $differenceRow->station2->station . ' (' . $altitudeDifference . ' m)';        return $subject;    }}
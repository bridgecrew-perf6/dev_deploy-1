<?phpnamespace Nemundo\Meteoschweiz\Content\TopListing\View;use Nemundo\Admin\Com\Table\AdminBootstrapTable;use Nemundo\Com\TableBuilder\TableRow;use Nemundo\Content\View\AbstractContentView;use Nemundo\Db\Sql\Order\SortOrder;use Nemundo\Html\Paragraph\Paragraph;use Nemundo\Meteoschweiz\Com\Small\MeteoschweizSourceSmall;use Nemundo\Meteoschweiz\Content\TopListing\TopListingContentType;use Nemundo\Meteoschweiz\Data\Messwert\MesswertReader;use Nemundo\Meteoschweiz\Data\MesswertDateTime\MesswertDateTimeReader;class WindTopListingContentView extends AbstractContentView{    /**     * @var TopListingContentType     */    public $contentType;    protected function loadView()    {        $this->viewName = 'WindTopListing';        $this->viewId = 'd9865240-f3fc-4f9f-92dd-37422953146a';    }    public function getContent()    {        $listingRow = $this->contentType->getDataRow();        $dateTimeReader = new MesswertDateTimeReader();        $dateTimeReader->addOrder($dateTimeReader->model->dateTime, SortOrder::DESCENDING);        $dateTimeReader->limit = 1;        foreach ($dateTimeReader->getData() as $dateTimeRow) {            $p = new Paragraph($this);            $p->content = $dateTimeRow->dateTime->getShortDateTimeLeadingZeroFormat() . ' UTC';            $table = new AdminBootstrapTable($this);            $messwertReader = new MesswertReader();            $messwertReader->model->loadStation();            $messwertReader->filter->andEqual($messwertReader->model->dateTimeId, $dateTimeRow->id);            $messwertReader->filter->andEqual($messwertReader->model->hasWind, true);            $messwertReader->addOrder($messwertReader->model->wind, SortOrder::DESCENDING);            //$messwertReader->addOrder($messwertReader->model->temperature, SortOrder::ASCENDING);            $messwertReader->limit = $listingRow->listingLimit;  // 10;            foreach ($messwertReader->getData() as $messwertRow) {                $row = new TableRow($table);                $row->addText($messwertRow->station->station);                $row->addText($messwertRow->station->geoCoordinate->altitude . ' m.ü.M.');                $row->addText($messwertRow->getWindText());  //temperature . '° C');            }        }        new MeteoschweizSourceSmall($this);        return parent::getContent();    }}
<?phpnamespace Nemundo\Meteoschweiz\Widget\Content\MaxTemperatureToday;use Nemundo\Admin\Com\Table\AdminClickableTable;use Nemundo\Admin\Com\Table\AdminBootstrapTable;use Nemundo\Admin\Com\Table\AdminTableHeader;use Nemundo\Admin\Com\Table\Row\AdminClickableTableRow;use Nemundo\Admin\Com\Table\Row\AdminTableRow;use Nemundo\Content\View\AbstractContentView;use Nemundo\Db\Sql\Field\Aggregate\MaxField;use Nemundo\Db\Sql\Order\SortOrder;use Nemundo\Meteoschweiz\Content\Station\StationContentType;use Nemundo\Meteoschweiz\Data\Messwert\MesswertReader;class MaxTemperatureTodayContentView extends AbstractContentView{    /**     * @var MaxTemperatureTodayContentType     */    public $contentType;    protected function loadView()    {        $this->viewName = 'default';        $this->viewId = '9d7ef9ab-9370-4210-8a90-ad5267b764cb';        $this->defaultView = true;    }    public function getContent()    {        $reader = new MesswertReader();        $reader->model->loadStation();        $reader->model->loadDateTime();        $reader->filter->andEqual($reader->model->hasTemperature,true);        //$reader->addOrder($reader->model->temperature,SortOrder::DESCENDING);        $reader->addGroup($reader->model->stationId);        //$reader->limit = 10;        $max=new MaxField($reader);        $max->aggregateField=$reader->model->temperature;        $reader->addOrder($max,SortOrder::DESCENDING);        $table= new AdminClickableTable($this);        $header=new AdminTableHeader($table);        $header->addText($reader->model->station->label);        $header->addText($reader->model->dateTime->label);        $header->addText($reader->model->temperature->label);        foreach ($reader->getData() as $messwertRow) {            $row=new AdminClickableTableRow($table);            $row->addText($messwertRow->station->station);            $row->addText($messwertRow->dateTime->dateTime->getShortDateTimeLeadingZeroFormat());            $row->addText($messwertRow->getTemperatureText());            $row->addText($messwertRow->getModelValue($max));            $contentType = new StationContentType($messwertRow->stationId);            $row->addClickableSite($contentType->getViewSite());        }        return parent::getContent();    }}
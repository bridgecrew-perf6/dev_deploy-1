<?phpnamespace Nemundo\Meteo\Meteocentrale\Scheduler;use Nemundo\App\Scheduler\Job\AbstractScheduler;use Nemundo\Core\File\UniqueFilename;use Nemundo\Core\File\File;use Nemundo\Core\WebRequest\WebRequest;use Nemundo\Meteo\Meteocentrale\Data\Bisendiagramm\Bisendiagramm;use Nemundo\Meteo\Meteocentrale\Data\Foehndiagramm\Foehndiagramm;use Nemundo\Project\Path\TmpPath;class FoehnBisendiagrammScheduler extends AbstractScheduler{    protected function loadScheduler()    {        $this->active = true;        $this->hour = 2;        $this->consoleScript=true;        $this->scriptName='meteocentrale-import';    }    public function run()    {        // FÃ¶hn        $url = 'http://www.meteocentrale.ch/uploads/pics/uwz-ch_foehn_de.png';        $filename = (new TmpPath())            ->addPath((new UniqueFilename())->getUniqueFilename('png'))            ->getFilename();        (new WebRequest())->downloadUrl($url, $filename);        $file = new File($filename);        $data = new Foehndiagramm();        $data->ignoreIfExists = true;        $data->foehndiagramm->fromFilename($filename);        $data->foehndiagrammHash = $file->getHash();        $data->save();        $file->deleteFile();        // Bise        $url = 'http://www.meteocentrale.ch/uploads/pics/uwz-ch_bise_de.png';        $filename = (new TmpPath())            ->addPath((new UniqueFilename())->getUniqueFilename('png'))            ->getFilename();        (new WebRequest())->downloadUrl($url, $filename);        $file = new File($filename);        $data = new Bisendiagramm();        $data->ignoreIfExists = true;        $data->bisendiagramm->fromFilename($filename);        $data->bisendiagrammHash = $file->getHash();        $data->save();        $file->deleteFile();    }}
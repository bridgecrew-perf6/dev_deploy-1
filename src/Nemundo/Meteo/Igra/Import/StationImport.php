<?phpnamespace Nemundo\Meteo\Igra\Import;use Nemundo\Core\Csv\Reader\FixWidthCsvReader;use Nemundo\Core\Type\Text\Text;use Nemundo\Meteo\Igra\Data\Country\CountryId;use Nemundo\Meteo\Igra\Data\Station\Station;use Nemundo\Project\Path\TmpPath;class StationImport extends AbstractImport{    public function importData()    {        $url = 'https://www1.ncdc.noaa.gov/pub/data/igra/igra2-station-list.txt';        $filename = (new TmpPath())            ->addPath('igra2-station-list.txt')            ->getFilename();        //(new CurlWebRequest())->downloadUrl($url, $filename);        $reader = new FixWidthCsvReader();        $reader->filename = $filename;        //$reader->addSeperationPosition(0);        //$reader->addSeperationPosition(2);        $reader->addSeperationPosition(12);        $reader->addSeperationPosition(21);        $reader->addSeperationPosition(31);        $reader->addSeperationPosition(41);        $reader->addSeperationPosition(72);        $reader->addSeperationPosition(77);        $reader->addSeperationPosition(82);        foreach ($reader->getData() as $csvRow) {            $code = $csvRow[0];            $text=new Text($code);            $countryCode = $text->getSubstring(0,2);            $id=new CountryId();            $id->filter->andEqual($id->model->countryCode,$countryCode);            $countryId = $id->getId();            $data = new Station();            $data->updateOnDuplicate = true;            $data->identificationCode = $csvRow[0];            $data->coordinate->latitude = $csvRow[1];            $data->coordinate->longitude = $csvRow[2];            $data->coordinate->altitude = $csvRow[3];            $data->station = $csvRow[4];            $data->countryId=$countryId;            $data->yearFrom= $csvRow[5];            $data->yearTo= $csvRow[6];            $data->save();        }    }}
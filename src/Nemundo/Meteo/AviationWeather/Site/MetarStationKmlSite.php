<?phpnamespace Nemundo\Meteo\AviationWeather\Site;use Nemundo\Com\TableBuilder\TableRow;use Nemundo\Geo\Kml\Document\KmlDocument;use Nemundo\Geo\Kml\Object\KmlMarker;use Nemundo\Geo\Kml\Site\AbstractKmlSite;use Nemundo\Html\Block\Div;use Nemundo\Html\Heading\H2;use Nemundo\Html\Paragraph\Paragraph;use Nemundo\Html\Table\Table;use Nemundo\Meteo\AviationWeather\Data\Metar\MetarReader;use Nemundo\Meteo\AviationWeather\Data\MetarStation\MetarStationReader;class MetarStationKmlSite extends AbstractKmlSite{    /**     * @var MetarStationKmlSite     */    public static $site;    protected function loadSite()    {        $this->title = 'Metar Station Kml';        $this->url = 'metar-station-kml';        MetarStationKmlSite::$site = $this;    }    public function loadContent()    {        $kml = new KmlDocument();        $metarReader = new MetarReader();        $metarReader->model->loadStation();        //$metarReader->filter->andEqual($metarReader->model->hasQnh,true);        foreach ($metarReader->getData() as $metarRow) {            $div=new Div();            $h2=new H2($div);            $h2->content=$metarRow->station->stationCode;            $p=new Paragraph($div);            $p->content=$metarRow->metarRaw;            $table=new Table($div);            $row=new TableRow($table);            $row->addText('Temperature');            $row->addText($metarRow->temperature);            $row=new TableRow($table);            $row->addText('QNH');            $row->addText($metarRow->qnh);            $placemark = new KmlMarker($kml);            $placemark->label = $metarRow->station->stationCode;            //$placemark->description= $metarRow->qnh;            $placemark->description=$div->getBodyContent();  //  $metarRow->temperature.' - '.$metarRow->qnh;            $placemark->coordinate = $metarRow->station->coordinate;        }        /*        $reader = new MetarStationReader();        foreach ($reader->getData() as $stationRow) {            $placemark = new KmlMarker($kml);            $placemark->label = $stationRow->stationCode;            $placemark->coordinate = $stationRow->coordinate;        }*/        $kml->render();    }}
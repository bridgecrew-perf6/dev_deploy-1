<?phpnamespace Nemundo\Meteo\AviationWeather\Page;use Nemundo\Admin\Com\Button\AdminIconSiteButton;use Nemundo\Com\Template\AbstractTemplateDocument;use Nemundo\Core\Type\Number\Number;use Nemundo\Meteo\AviationWeather\Data\Metar\MetarReader;use Nemundo\Meteo\AviationWeather\Site\MetarStationJsonSite;use Nemundo\Meteo\AviationWeather\Site\MetarStationKmlSite;use Nemundo\Package\Bootstrap\FormElement\BootstrapTextBox;use Nemundo\Svg\Circle;use Nemundo\Svg\Color\RgbColor;use Nemundo\Svg\Geo\GeoCoordinateXyConverter;use Nemundo\Svg\SvgImage;class AviationWeatherPage extends AbstractTemplateDocument{    public function getContent()    {        $txt=new BootstrapTextBox($this);        $txt->label='Metar Station Json';        $txt->value= MetarStationJsonSite::$site->getUrlWithDomain();        $btn=new AdminIconSiteButton($this);        $btn->site= MetarStationKmlSite::$site;        $img = new SvgImage($this);        $img->width = 2000;        $img->height = 1000;        $converter = new GeoCoordinateXyConverter();        $converter->width = $img->width;        $converter->height = $img->height;        $reader = new MetarReader();        $reader->model->loadStation();        //$reader->filter->andEqual($reader->model->hasTemperature, true);        $reader->filter->andEqual($reader->model->hasQnh, true);        foreach ($reader->getData() as $stationRow) {            $xyCoordinate = $converter->getXY($stationRow->station->coordinate);            $circle = new Circle($img);            $circle->x = (new Number($xyCoordinate->x))->getRoundedNumber(0);            $circle->y = (new Number($xyCoordinate->y))->getRoundedNumber(0);            $circle->radius = 4;            $circle->rgbColor = new RgbColor();            $circle->rgbColor->r = 100;            $circle->rgbColor->g = 100;            $circle->rgbColor->b = 100 + ((new Number($stationRow->temperature))->getRoundedNumber(0) * 2);            $circle->rgbColor->hsl = ((new Number($stationRow->temperature))->getRoundedNumber(0)) * 3;            //$circle->rgbColor->hsl = ((new Number($stationRow->qnh-980))->roundNumber(0));            //$circle->rgbColor->hsl = 50;        }        return parent::getContent();    }}
<?phpnamespace Nemundo\Roundshot\Download;use Nemundo\Core\Base\AbstractBase;use Nemundo\Core\Debug\Debug;use Nemundo\Core\Type\DateTime\Date;use Nemundo\Core\File\File;use Nemundo\Core\Type\Text\Text;use Nemundo\Core\WebRequest\CurlWebRequest;use Nemundo\Roundshot\Data\Roundshot\RoundshotRow;use Nemundo\Roundshot\Path\DayRoundshotCachePath;use Nemundo\Roundshot\Path\RoundshotCachePath;use Nemundo\Roundshot\Reader\RoundshotImageJsonReader;class RoundshotImageDownload extends AbstractBase{    /**     * @var RoundshotRow     */    public $roundshotRow;    /**     * @var Date     */    public $date;    /**     * @var Date     */    //public $dateTo;    public function downloadImage()    {        //$date = $this->date;        $count = 1;        $reader = new RoundshotImageJsonReader();        $reader->date = $this->date;        $reader->roundshotUrl = $this->roundshotRow->url;        foreach ($reader->getData() as $item) {            //$timeText = (new Text($item->dateTime->getIsoTimePrefixZero()))->replace(':', '-')->getValue();            $timeText = $count;            $filename = (new DayRoundshotCachePath($this->roundshotRow,$this->date))                //->addPath($this->roundshotRow->roundshotNumber)                //->addPath($item->dateTime->getIsoDateFormat())                //->createPath()                ->addPath($timeText.'.jpg')                ->getFullFilename();            //(new Debug())->write($filename);            if ((new File($filename))->notExists()) {                (new CurlWebRequest())->downloadUrl($item->imageUrl, $filename);            }            $count++;        }    }}
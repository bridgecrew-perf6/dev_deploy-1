<?phpnamespace Nemundo\Roundshot\Page;use Nemundo\Admin\Com\Button\AdminSearchButton;use Nemundo\Admin\Com\Table\AdminBootstrapTable;use Nemundo\Com\FormBuilder\SearchForm;use Nemundo\Com\Html\Hyperlink\UrlHyperlink;use Nemundo\Com\TableBuilder\TableRow;use Nemundo\Db\Sql\Order\SortOrder;use Nemundo\Package\Bootstrap\Layout\Grid\BootstrapRow;use Nemundo\Package\Bootstrap\FormElement\BootstrapDatePicker;use Nemundo\Roundshot\Com\ListBox\RoundshotListBox;use Nemundo\Roundshot\Content\Webcam\RoundshotWebcamContentType;use Nemundo\Roundshot\Data\Roundshot\RoundshotReader;use Nemundo\Roundshot\Download\ImageListDownload;use Nemundo\Roundshot\Reader\RoundshotImageJsonReader;use Nemundo\Roundshot\Template\RoundshotTemplate;use Paranautik\Template\DesktopTemplate;class _RoundshotImagePage extends RoundshotTemplate  // DesktopTemplate{    public function getContent()    {        $form=new SearchForm($this);        $formRow = new BootstrapRow($form);        $roundshot=new RoundshotListBox($formRow);        $roundshot->searchMode=true;        $date= new BootstrapDatePicker($formRow);        $date->label='Date';        $date->searchMode=true;        new AdminSearchButton($formRow);        if ($date->hasValue()) {        /*$download=new ImageListDownload();        $download->roundshotRow=(new RoundshotReader())->getRowById($roundshot->getValue());        $download->date=$date->getDateValue();        $download->download();*/            $roundshotRow=(new RoundshotWebcamContentType($roundshot->getValue()))->getDataRow();            $table = new AdminBootstrapTable($this);            $imageReader = new RoundshotImageJsonReader();   // new RoundshotImageReader();            $imageReader->date = $date->getDateValue();            $imageReader->roundshotUrl = $roundshotRow->url;            /*$imageReader->filter->andEqual($imageReader->model->roundshotId,$roundshot->getValue());            $imageReader->filter->andEqual($imageReader->model->date,$date->getDateValue()->getIsoDateFormat());*/            //$imageReader->model->loadRoundshot();           // $imageReader->addGroup($imageReader->model->roundshotId);            //$imageReader->addOrder($imageReader->model->roundshot->title);            //$imageReader->addOrder($imageReader->model->date, SortOrder::DESCENDING);            //$imageReader->filter->andEqual($imageReader->model->download, true);            //$imageReader->addOrder($imageReader->model->roundshot->title);            //$imageReader->addOrder($imageReader->model->time);            foreach ($imageReader->getData() as $imageRow) {                $row = new TableRow($table);                $row->addText($imageRow->dateTime->getIsoDate());                $row->addText($imageRow->dateTime->getIsoTime());                $link = new UrlHyperlink($row);                $link->content = $imageRow->imageUrl;                $link->url = $imageRow->imageUrl;                $link->openNewWindow = true;                /*                $row->addText($imageRow->date->getIsoDateFormat());                $row->addText($imageRow->time->getIsoTime());*/                /*                $link = new UrlHyperlink($row);                $link->content = $imageRow->roundshot->title;                $link->url = $imageRow->roundshot->url;                $link->openNewWindow = true;                $img = new Image($row);                $img->src = $imageRow->image->getImageUrl($imageRow->model->imageFixWidth1200);                $link = new UrlHyperlink($row);                $link->content = $imageRow->dateTime->getShortDateTimeLeadingZeroFormat();                $link->url = $imageRow->imageUrl;                $link->openNewWindow = true;*/                //$row->addText($imageRow->dateTime->getShortDateTimeLeadingZeroFormat());                $row->addHyperlink($imageRow->url);            }        }       /* $btn = new AdminButton($this);        $btn->content = 'Kml';        $btn->site = RoundshotKmlSite::$site;*/        /*        $form = new RoundshotDownloadForm($this);        new RoundshotDownloadTable($this);        $search = new SearchForm($this);        $listbox = new RoundshotListBox($search);        $date = new BootstrapDatePicker($search);        $date->label = 'Datum';        $table = new AdminTable($this);        $imageReader = new RoundshotImageReader();        $imageReader->model->loadRoundshot();        $imageReader->addGroup($imageReader->model->roundshotId);        $imageReader->addOrder($imageReader->model->roundshot->title);        $imageReader->addOrder($imageReader->model->dateTime, SortOrder::DESCENDING);        $imageReader->filter->andEqual($imageReader->model->download, true);        //$imageReader->addOrder($imageReader->model->roundshot->title);        //$imageReader->addOrder($imageReader->model->dateTime);        foreach ($imageReader->getData() as $imageRow) {            $row = new TableRow($table);            //$row->addText($imageRow->roundshot->title);            $link = new UrlHyperlink($row);            $link->content = $imageRow->roundshot->title;            $link->url = $imageRow->roundshot->url;            $link->openNewWindow = true;            $img = new Image($row);            $img->src = $imageRow->image->getImageUrl($imageRow->model->imageFixWidth1200);            $link = new UrlHyperlink($row);            $link->content = $imageRow->dateTime->getShortDateTimeLeadingZeroFormat();            $link->url = $imageRow->imageUrl;            $link->openNewWindow = true;            //$row->addText($imageRow->dateTime->getShortDateTimeLeadingZeroFormat());            //$row->addHyperlink($imageRow->imageUrl);        }        //new RoundshotTable($this);*/        /*        $btn = new AdminSiteButton($this);        $btn->site = \Nemundo\Roundshot\Site\RoundshotKmlSite::$site;        /*        new RoundshotSearchForm($this);        $table= new AdminTable($this);        $json=new ImageJsonReader();        $json->roundshotRow=(new RoundshotParameter())->getRoundshotRow();       // (new Debug())->write((new DateParameter())->getDate());        $json->date=(new DateParameter())->getDate();        foreach ($json->getData() as $jsonItem) {            $row=new TableRow($table);            $row->addHyperlink($jsonItem->imageUrl,$jsonItem->dateTime->getTimeLeadingZero(),true);            $row->addHyperlink($jsonItem->imageUrl,$jsonItem->dateTime->getShortDateTimeLeadingZeroFormat(),true);        }*/        /*        $form=new SearchForm($this);        $formRow=new BootstrapRow($form);        $roundshot = new RoundshotListBox($formRow);$roundshot->searchMode=true;        $date= new BootstrapDatePicker($formRow);        $date->label='Date';        new AdminSearchButton($formRow);*/        /*        $table = new AdminClickableTable($this);        $roundshotReader = new RoundshotReader();        //$roundshotReader->addOrder($roundshotReader->model->geoCoordinate->altitude, SortOrder::DESCENDING);        $roundshotReader->addOrder($roundshotReader->model->roundshot);  //, SortOrder::DESCENDING);        $header = new TableHeader($table);        $header->addText($roundshotReader->model->roundshot->label);        $header->addText($roundshotReader->model->geoCoordinate->altitude->label);        foreach ($roundshotReader->getData() as $roundshotRow) {            $row = new BootstrapClickableTableRow($table);            //$row->addText($roundshotRow->id);            $row->addText($roundshotRow->roundshot);//            $row->addText((new Number( $roundshotRow->geoCoordinate->altitude))->roundNumber(0) . ' m.Ã¼.M.');            $row->addText($roundshotRow->geoCoordinate->altitude);            $row->addClickableUrl($roundshotRow->url);        }        /*        $btn = new AdminSiteButton($this);        $btn->site = RoundshotKmlSite::$site;        $layout = new BootstrapTwoColumnLayout($this);        $layout->col1->columnWidth= 9;        $layout->col2->columnWidth = 3;        /*        $map = new GoogleMaps($layout->col1);        $map->addKmlLayer(RoundshotKmlSite::$site->getUrlWithDomain());        $map->height = 800;*/        /*  $widget = new AdminWidget($layout->col2);          $widget->widgetTitle = 'Peak Roundshot';          $table = new AdminClickableTable($widget);          $reader = new RoundshotReader();          $reader->addOrder($reader->model->coordinate->altitude, SortOrder::DESCENDING);          $reader->limit = 20;          foreach ($reader->getData() as $roundshotRow) {              $row = new BootstrapClickableTableRow($table);              $row->addText($roundshotRow->title);              $row->addText($roundshotRow->coordinate->altitude.' m.Ã¼.M.');              $row->addClickableUrl($roundshotRow->url);          }*/        return parent::getContent();    }}
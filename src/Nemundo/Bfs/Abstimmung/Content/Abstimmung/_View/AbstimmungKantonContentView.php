<?phpnamespace Nemundo\Bfs\Abstimmung\Content\Abstimmung\View;use Nemundo\Admin\Com\Table\AdminLabelValueTable;use Nemundo\Admin\Com\Table\AdminTable;use Nemundo\Admin\Com\Table\Row\AdminTableRow;use Nemundo\Bfs\Abstimmung\Content\Abstimmung\AbstimmungContentType;use Nemundo\Bfs\Abstimmung\Data\Resultat\ResultatReader;use Nemundo\Bfs\Abstimmung\Type\GeoLevel\KantonGeoLevel;use Nemundo\Bfs\Abstimmung\Type\GeoLevel\BundGeoLevel;use Nemundo\Com\TableBuilder\TableHeader;use Nemundo\Com\TableBuilder\TableRow;use Nemundo\Content\View\AbstractContentView;// Kanton Listingclass AbstimmungKantonContentView extends AbstractContentView{    /**     * @var AbstimmungContentType     */    public $contentType;    protected function loadView()    {        $this->viewName='Kanton';        $this->viewId='f89e6dac-afc5-4770-8a4e-5afd81ebb90c';        $this->defaultView=false;    }    public function getContent()    {        $reader = new ResultatReader();        $reader->model->loadAbstimmung();        $reader->model->abstimmung->loadDatum();        $reader->model->loadGeo();        $reader->filter->andEqual($reader->model->abstimmungId, $this->contentType->getDataId());        $reader->filter->andEqual($reader->model->geo->geoLevelId, (new KantonGeoLevel())->id);        $table = new AdminTable($this);        $header = new TableHeader($this);        foreach ($reader->getData() as $resultatCustomRow) {            $row=new AdminTableRow($table);            $row->addText($resultatCustomRow->model->jaProzent->label, $resultatCustomRow->getJaProzent());            $row->addText($resultatCustomRow->model->jaAbsolut->label, $resultatCustomRow->getJaStimmen());            $row->addText($resultatCustomRow->model->neinAbsolut->label, $resultatCustomRow->getNeinStimmen());            $table = new AdminLabelValueTable($this);            $table->addLabelValue($resultatCustomRow->model->abstimmung->datum->label, $resultatCustomRow->abstimmung->datum->datum->getLongFormat());            $table->addLabelValue($resultatCustomRow->model->stimmbeteiligungProzent->label, $resultatCustomRow->getStimmbeteiligungProzent());            $table->addLabelValue($resultatCustomRow->model->neinAbsolut->label, $resultatCustomRow->getStimmbeteiligungProzent());        }        return parent::getContent();    }}